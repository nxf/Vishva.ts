<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">

        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <meta name="Vishva" content="">
        <meta name="Satguru Srivatavaa" content="">
        <link rel="icon" href="../../favicon.ico">

        <title>Vishva</title>

        <script src="lib/jquery-darkness-flat/jquery-2.2.0.min.js"></script>
        <script src="lib/jquery-darkness-flat/jquery-ui.min.js"></script>
        <link href="lib/jquery-darkness-flat/jquery-ui.min.css" rel="stylesheet">

        <script src="lib/cannon.js"></script>

        <!--<script src="lib/babylon.2.6-12-16-2016.js"></script>--> 
        <!--<script src="lib/babylon2.6-01-18-2017.js"></script>--> 
        <!--<script src="lib/babylon3.0-03-20-2017.js"></script>--> 

        <!-- following uses bluerExponential Shadowmaps -->
        <!-- also arcrotate camera seems to have some sublte change in 3.0 -->
        <!--<script src="lib/babylon3.0-04-20-2017.js"></script>--> 
        <!--<script src="lib/babylon2.6-05-12-2017.js"></script>--> 
        <script src="lib/babylon3.0-08-08-2017.js"></script> 

        <!--ok-->
        <!--<script src="lib/babylon-06-19-2017.max.js"></script>-->

        <!-- shadow is broken below -->
        <!--<script src="lib/babylon-06-30-2017.max.js"></script>-->
        <!--<script src="lib/babylon3.0-07-27-2017.js"></script>-->

        <!-- the latest -->
        <!--<script src="https://preview.babylonjs.com/babylon.js"></script>-->
        <!-- stable -->
        <!--<script src="https://cdn.babylonjs.com/babylon.js"></script>-->

        <!--<script src="lib/babylon.inspector.bundle-06-26-2017.js"></script>-->
        <script src="lib/babylon.inspector.bundle-08-23-2017.js"></script>

        <!--<script src="lib/babylon.waterMaterial.min.js"></script>-->
        <script src="lib/babylon.waterMaterial.min-08-24-2017.js"></script>
        <!-- loaders -->
        <script src="lib/babylon.glTFFileLoader3.1-preview.min.js"></script>
        <script src="lib/babylon.objFileLoader3.0-stable.min.js"></script>

        <script src="lib/pep.0.4.1.min.js"></script>

        <!-- problem with the colorpicker minified version . see https://github.com/DavidDurman/FlexiColorPicker/issues/40 -->
        <!--<script src="lib/colorpicker.min.js"></script>-->
        <script src="lib/colorpicker.uglified.js"></script>
        <!--<script src="lib/colorpicker.js"></script>-->

        <link href="lib/colorpicker.themes.css" rel="stylesheet">

        <style>
            html, body {
                width: 100%;
                height: 100%;
                padding: 0;
                margin: 0;
                /*overflow: hidden;*/
                font-size: 80%;
                /*font-family: "Courier New", "Trebuchet MS", sans-serif;
                font-family: "Courier New Bold";*/
                background: #000000;
                color: #ffffff;
            }


            /* #sNaDiag */
            /* required as jquery dialog size does not re-adjust to content after it has been dragged */
            /* unfortunately messes up the dialog box for add items */
            /*
            .ui-dialog {
                          height:auto !important;
                          width: auto !important;
                          
             }
            */

            /* remove button outlines */
            /* the button outline on dialog box close button on top-right are not done properly */
            .ui-button:focus { outline:none !important }
            .ui-button {
                font-weight: lighter;
            }
            /* reduce the overlay for modal dialogs */
            .ui-widget-overlay {
                opacity: 0.2;
            }

            /* to flip some jquery icons - like undo redo */
            .flip {
                -moz-transform: scaleX(-1);
                -o-transform: scaleX(-1);
                -webkit-transform: scaleX(-1);
                transform: scaleX(-1);
                filter: FlipH;
            }
            /* to display mutliple icons on same line */
            .ui-icon.inline { display:inline-block; }â€‹

            .navMenu {
                position: absolute;
            }

            .ui-menu {
                width: 200px;
            }

            /*input {margin: 1px;}*/
            table {
                border-radius: 10px;
                background: red;
            }

            table, th, td {
                border: 1px solid black;
                padding: 5px;
                padding-left: 15px;
                padding-right: 15px;
                border-collapse: collapse;
            }

            table table, table table td {
                padding: 2px;
                padding-left: 4px;
                padding-right: 4px;
                margin: 2px;
                /*                padding-top: 1px;
                                padding-bottom: 1px;
                                border-collapse: collapse;*/
            }

            #vCanvas {
                min-height: 700px;
                min-width: 500px;
                position: absolute;
                top: 0;
                right: 0;
                width: 100%;
                height: 100%;
            }

            #gui-items-1 {
                visibility: hidden;
                /*position: absolute;*/
                position: fixed;
                top: 0;
                right: 0;
                width: 100%;
                height:100%;
            }

            #gui-items-2 {
                visibility: hidden;
                /*position: absolute;*/
                position: fixed;
                display:none;
                top: 0;
                right: 0;
                width: 100%;
                height:100%;
            }

        </style>

    </head>
    <body oncontextmenu="return false;">

        <canvas id="vCanvas" tabindex="1"></canvas>

        <div id="gui-items-1">

            <div id="loadingMsg"
                 style="text-align: center; display: inline-block; position: fixed; top: 0; bottom: 0; left: 0; right: 0; width: 200px; height: 100px; margin: auto;">
                <h1>loading</h1>
                <h1>please wait</h1>
                <br>
                <h2 id="loadingStatus">...</h2>
            </div>

            <div style="padding: 4px; position: absolute; top: 0px; left: 0px;display:block;  ">
                <button id="showNavMenu">&#9776;</button>
            </div>

            <div id="navMenubar" style="padding: 4px; display: inline-block; position: absolute;display:block;">
                <button id="downWorld"><span class="ui-icon  ui-icon ui-icon-arrowthickstop-1-s" title="download scene"></span></button>
                <button id="navAdd"><span class="ui-icon ui-icon-plusthick" title="add"></span> </button>
                <button id="navEnv"><span class="ui-icon ui-icon-image" title="environment"></span> </button>
                <button id="navEdit"><span class="ui-icon ui-icon-wrench" title="edit"></span> </button>
                <button id="navSettings"><span class="ui-icon ui-icon-gear" title="settings"></span> </button>
                <button id="helpLink"><span class="ui-icon ui-icon-help" title="help"></span> </button>
                <button id="debugLink"><span class="ui-icon ui-icon-info" title="debug"></span> </button>
            </div>

            <ul id="AddMenu" style="position: absolute; width: auto; ">
            </ul>

        </div>

        <!-- all elements used by jquery ui -->
        <div id="gui-items-2">
            <div id="envDiv" title="Environment">
                <table style="width: 100%; text-align: center;">
                    <tr>
                        <td>sun (west-east)</td>
                        <td><div id="sunPos"></div></td>
                    </tr>
                    <tr>
                        <td>light</td>
                        <td><div id="light"></div></td>
                    </tr>
                    <tr>
                        <td>shade</td>
                        <td><div id="shade"></div></td>
                    </tr>
                    <tr>
                        <td>fog</td>
                        <td><div id="fog"></div></td>
                    </tr>
                    <tr>
                        <td>fog color</td>
                        <td><div id="fogCol"></div></td>
                    </tr>
                    <tr>
                        <td>toggle snow</td>
                        <td><Button id="envSnow">snow</button></td>
                    </tr>
                    <tr>
                        <td>toggle rainy</td>
                        <td><Button id="envRain">rain</button></td>
                    </tr>

                    <tr>
                        <td>fov</td>
                        <td><div id="fov"></div></td>
                    </tr>
                    <tr>
                        <td>sky</td>
                        <td><Button id="skyButton">Select Sky</button></td>
                    </tr>
                    <tr>
                        <td>terrain</td>
                        <td><Button id="trnButton">Select Terrain</button></td>
                    </tr>
                    <tr>
                        <td>terrain color</td>
                        <td><div id="trnCol"></div></td>
                    </tr>
                </table>
            </div>

            <div id="settingDiag" title="Settings" data-keyboard="false">
                <table style="width: 100%; text-align: center;">
                    <tr>
                        <td>camera collision</td>
                        <td><input id="camCol" type="checkbox"/></td>
                    </tr>
                    <tr>
                        <td>show edit menu on mesh selection</td>
                        <td><input id="autoEditMenu" type="checkbox"/></td>
                    </tr>
                    <tr>
                        <td>show tooltips</td>
                        <td><input id="showToolTips" type="checkbox"/></td>
                    </tr>
                    <tr>
                        <td>show invisibles</td>
                        <td><input type="checkbox" id="showInvis"></td>
                    </tr>
                    <tr>
                        <td>show disabled</td>
                        <td><input type="checkbox" id="showDisa"></td>
                    </tr>
                    <tr>
                        <td>enable snapper</td>
                        <td><input type="checkbox" id="snapper"></td>
                    </tr>
                </table>

            </div>

            <div id="sNaDiag">
                <div id="sNaDetails">
                    <ul>
                        <li><a href="#sensors">Sensors</a></li>
                        <li><a href="#actuators">Actuators</a></li>
                    </ul>
                    <div id="sensors">
                        <button id="addSens">add</button>
                        <select id="sensSel" class="ui-widget-content ui-corner-all"></select>
                        <p>
                        <table id="sensTbl" style="text-align: center;">
                            <tr>
                                <td>name</td>
                                <td>signal</td>
                                <td>edit</td>
                                <td>del</td>
                            </tr>
                        </table>
                    </div>
                    <div id="actuators">
                        <button id="addAct">add</button>
                        <select id="actSel" class="ui-widget-content ui-corner-all"></select>
                        <p>
                        <table id="actTbl" style="text-align: center;">
                            <tr>
                                <td>name</td>
                                <td>signal</td>
                                <td>edit</td>
                                <td>del</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <div id="editSensDiag">
                Sensor:<label id="editSensDiag.sensName">sensor name</label>
                <p>Sensor Properties
                <div id="editSensDiag.parms"></div>
            </div>

            <div id="editActDiag">
                Actuator:<label id="editActDiag.actName">actuator name</label>
                <p>Actuator Properties
                <div id="editActDiag.parms"></div>
            </div>

            <div id="propsDiag" title="mesh properties" >
                <!--
                properties accordion
                -->
                <div id="propsAcc" >

                    <h3>General</h3>
                    <div id="gen" >
                        <table >
                            <tr>
                                <td>
                                    name <input type="text" id="genName" >
                                    space 
                                    <select id="genSpace" title="space for translation and rotation">
                                        <option value="local" >local</option>
                                        <option value="world">world</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="float:left;clear:left">
                                        <button id="operTrans" ><span class="ui-icon ui-icon-arrow-4" title="translate"></span>  </button>
                                        <button id="operRot" ><span class="ui-icon ui-icon-arrowrefresh-1-e" title="rotate"></span>  </button>
                                        <button id="operScale" ><span class="ui-icon ui-icon-arrow-4-diag" title="scale"></span>  </button>
                                        <button id="operFocus" ><span class="ui-icon  ui-icon-zoomin" title="focus"></span>  </button>
                                        <button id="undo" ><span class="ui-icon ui-icon-arrowreturnthick-1-w" title="undo"></span>  </button>
                                        <button id="redo"><span class="flip ui-icon ui-icon-arrowreturnthick-1-w" title="redo"></span>  </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <table>
                                        <tr>
                                            <td></td>
                                            <td>x</td>
                                            <td>y</td>
                                            <td>z</td>
                                            <td>snap</td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>position</td>
                                            <td><input type="text" size="2" id="loc.x" ></td>
                                            <td><input type="text" size="2" id="loc.y" ></td>
                                            <td><input type="text" size="2" id="loc.z" ></td>                                            
                                            <td><input type="text" size="2" id="snapTransValue"></td>
                                            <td><input type="checkbox" id="snapTrans"></td>
                                        </tr>
                                        <tr>
                                            <td>rotation</td>
                                            <td><input type="text" size="2" id="rot.x" ></td>
                                            <td><input type="text" size="2" id="rot.y" ></td>
                                            <td><input type="text" size="2" id="rot.z" ></td>
                                            <td><input type="text" size="2" id="snapRotValue"></td>
                                            <td><input type="checkbox" id="snapRot"></td>
                                        </tr>
                                        <tr>
                                            <td>scaling</td>
                                            <td><input type="text" size="2" id="scl.x" ></td>
                                            <td><input type="text" size="2" id="scl.y" ></td>
                                            <td><input type="text" size="2" id="scl.z" ></td>
                                            <td><input type="text" size="2" id="snapScaleValue"></td>
                                            <td><input type="checkbox" id="snapScale"></td>                                            
                                        </tr>
                                    </table>
                                    <button id="transRefresh"><span class="ui-icon ui-icon-refresh" title="refresh"></span></button>
                                    <button id="transBake">bake</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" id="genDisable">disable
                                    <input type="checkbox" id="genColl">collision
                                    <input type="checkbox" id="genVisi">visible

                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button id="cloneMesh"><span class="ui-icon ui-icon-copy" title="clone"></span> </button>
                                    <button id="instMesh"><span class="flip ui-icon  ui-icon-newwin" title="instance"></span></button>
                                    <button id="downMesh"><span class="ui-icon ui-icon-arrowthickstop-1-s" title="download mesh"></span> </button>
                                    <button id="delMesh"><span class="ui-icon ui-icon-trash" title="delete"></span> </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button id="parentMesh">parent</button>
                                    <button id="removeParent">remove parent</button>
                                    <button id="removeChildren">remove children</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button id="mergeMesh"><span class="ui-icon  ui-icon-link" title="merge meshes"></span> </button>
                                    <button id="subMesh"><span class="ui-icon  ui-icon-scissors" title="subtract a mesh from another"></span> </button>
                                    <button id="interMesh">intersect</button>


                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button id="swAv"><span class="ui-icon ui-icon-person" title="use as avatar"></span> </button>
                                    <button id="swGnd"><span class="ui-icon ui-icon-grip-solid-horizontal" title="use as ground"></span> </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button id="sNa" >
                                        <span class="ui-icon inline ui-icon-signal-diag" title="add sensors or actuators"></span>
                                        <span class="ui-icon inline  ui-icon-gear" title="add sensors or actuators"></span>     
                                    </button>
                                </td>
                            </tr>
                            <!--                            <tr>
                                                            <td>
                                                                <button id="addWater" >addWater</button>
                                                            </td>
                                                        </tr>-->
                        </table>
                    </div>

                    <h3>Physics</h3>
                    <div id="Physics" >
                        <table>
                            <tr>
                                <td>enabled</td>
                                <td><input type="checkbox" id="phyEna" ></td>
                            </tr>
                            <tr>
                                <td>type</td>
                                <td>
                                    <select id="phyType" >
                                        <option value="2" >box</option>
                                        <option value="1">sphere</option>
                                        <option value="3">plane</option>
                                        <option value="7">cylinder</option>
                                        <option value="4">mesh</option>
                                        <!--
                                        <option value="8">particle</option>
                                        <option value="9">height map</option>
                                        -->
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>mass</td>
                                <td><input type="text" id="phyMass" size="3" value="1"></td>
                            </tr>
                            <tr>
                                <td>restitution : <output for="phyRes" id="phyResVal"></output></td>
                                <td>
                                    <input type="range" id="phyRes" min="0.0" max="1.0" step="0.1" value="0.0">

                                </td>
                            </tr>
                            <tr>
                                <td>friction : <output for="phyFric" id="phyFricVal"></output> </td>
                                <td>
                                    <input type="range" id="phyFric" min="0.0" max="1.0" step="0.1" value="0.0">

                                </td>
                            </tr>
                        </table>
                        <br>
                        <button id ="phyApply">apply</button>
                        <button id ="phyTest"  title="test how physics work">test</button>
                        <button id ="phyReset" title="reset to state before test">reset</button>
                    </div>

                    <h3>Material</h3>
                    <div id="Material" >
                        <table>
                             <tr>
                                <td>
                                    Name   
                                </td>
                                <td>
                                    <label id="matName"></label>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    visibility :  <output for="matVis" id="matVisVal"></output> 
                                </td>
                                <td>
                                    <input type="range" id="matVis" min="0.0" max="1.0" step="0.01" value="1.00">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <select id="matColType">
                                        <option value="diffuse">diffuse color</option>
                                        <option value="emissive">emissive color</option>
                                        <option value="ambient">ambient color</option>
                                        <option value="specular">specular color</option>
                                    </select>
                                </td>
                                <td>
                                    <div id="matCol"></div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Textures 
                                </td>
                                <td>
                                    <select id="matTextType">
                                        <option value="diffuse">diffuse</option>
                                        <option value="emissive">emissive</option>
                                        <option value="ambient">ambient</option>
                                        <option value="specular">specular</option>
                                        <option value="bump">bump</option>
                                        <option value="lightMap">light map</option>
                                        <option value="opacity">opacity</option>
                                        <option value="reflection">reflection</option>
                                        <option value="refraction">refraction</option>
                                    </select>
                                    <button id="matTexture">show</button>
                                </td>
                            </tr>
                        </table>


                        <!--
                        <img height="64" width="64"/>
                        <table>
                            <tr>
                                <td style="vertical-align: top;"> colors : 
                                    <br><input type="color" id="matDcolor" >diffuse  
                                    <br><input type="color" id="matEcolor" >emissive
                                    <br><input type="color" id="matAcolor" >ambient
                                    <br><input type="color" id="matScolor" >specular 
                                    <br><input type="text" id="matSpower" size="1" >spec power 
                                </td>
                               
                            </tr>
                        </table>
                        -->
                    </div>

                    <h3>Lights</h3>
                    <div id="Lights" >
                        <table>
                            <tr>
                                <td>attach</td>
                                <td><input type="checkbox" id="lightAtt" ></td>
                            </tr>
                            <tr>
                                <td>type</td>
                                <td><select id="lightType" oninput="showOpt();">
                                        <option value="Spot">spot</option>
                                        <option value="Dir">directional</option>
                                        <option value="Point">point</option>
                                        <option value="Hemi">hemispheric</option>
                                    </select></td>
                            </tr>
                            <tr>
                                <td>diffuse</td>
                                <td><div id="lightDiff"></div></td>
                            </tr>
                            <tr>
                                <td>specular </td>
                                <td><div id="lightSpec"></div></td>
                            </tr>
                            <tr>
                                <td>intensity </td>
                                <td>
                                    <input type="range" id="lightInten" min="0.0" max="1.0" step="0.1" value="0.0">
                                </td>
                            </tr>
                            <tr>
                                <td>range</td>
                                <td>
                                    <input type="text" id="lightRange" size="3" value="1">
                                </td>
                            </tr>
                            <tr>
                                <td>radius</td>
                                <td>
                                    <input type="text" id="lightRadius" size="3" value="1">
                                </td>
                            </tr>
                            <tr class="opt Spot">
                                <td>angle</td>
                                <td>
                                    <input type="range" id="lightAngle" min="0.0" max="180.0" step="1" value="45.0">
                                </td>
                            </tr>
                            <tr class="opt Spot">
                                <td>exponent</td>
                                <td>
                                    <input type="text" id="lightExp" size="3" value="1">
                                </td>
                            </tr>
                            <tr class="opt Hemi">
                                <td>ground color</td>
                                <td>
                                    <input type="color" id="lightGndClr" value="#ffffff">
                                </td>
                            </tr>
                            <tr class="opt Hemi">
                                <td>direction (x,y,z)</td>
                                <td>
                                    <input type="text" id="lightDirX"  size="1" value="1">
                                    <input type="text" id="lightDirY" size="1" value="1">
                                    <input type="text" id="lightDirZ" size="1" value="1">
                                </td>
                            </tr>
                        </table>
                        <script>
                            function showOpt() {
                                var cls = "." + $("#lightType").val();
                                $(".opt").hide();
                                $(cls).show();
                            }
                            showOpt();
                        </script>
                    </div>

                    <h3>Animations</h3>
                    <div id="meshAnimDiag" >

                        <br>skeleton name : <label id="skelName"></label>
                        <br>
                        <button id="animSkelView">view skeleton</button>
                        <button id="animRest">show rest pose</button>

                        <br>
                        <br>skeleton animation ranges
                        <table>
                            <tr>
                                <td>range</td>
                                <td><select id="animList"></select>
                                    <label id="animFrom"></label>
                                    <label id="animTo"></lable
                            </tr>
                            <tr>
                                <td>rate</td>
                                <td><input id="animRate" type="text" value="1" size="2"></td>
                            </tr>
                            <tr>
                                <td>loop</td>
                                <td><input type="checkbox" id="animLoop"></td>
                            </tr>
                        </table>
                        <button id="playAnim">play</button><button id="stopAnim">stop</button>
                        <br>
                        <br>
                        create/modify an animation range
                        <table>
                            <tr>
                                <td>range name</td>
                                <td>from frame</td>
                                <td>to frame</td>
                            </tr>
                            <tr>
                                <td><input type="text" id="animRangeName"></td>
                                <td><input type="text" id="animRangeStart" size="2" ></td>
                                <td><input type="text" id="animRangeEnd" size="2"></td>    
                            </tr>
                        </table>
                        <button id="animRangeMake">create</button>
                        <br>
                        <hr>
                        <br>
                        All skeletons : <select id="animSkelList" class="ui-widget-content ui-corner-all"></select>
                        <br>
                        <br>
                        <button id="animSkelChange">switch to</button>
                        <button id="animSkelClone">clone and switch to</button>

                    </div>
                </div>
            </div>

            <div id="textureDiag">
                <img id="textImg" src="" height="200" alt="tga images cannot be displayed" width="200">
                <br>
                <button id="changeTexture" >change texture</button>
                <select id="textureList"></select>
            </div>



            <div id="saveDiv" oncontextmenu="event.stopPropagation();return true;">
                <br>Your file is ready for download.
                <p>
                    <a id="downloadLink" href="www" download oncontextmenu="return true;">Right click here and select "Save link as..." to save this file on your computer</a> <br> <br>
            </div>
            <!--
            <div id="loadDiv">
                <form id="fileLoadForm">
                    Select File <input id="loadFileInput" type="file"/>
                </form>
                <p>
                    <button id="loadFileOk">Load File</button>
            </div>
            -->
            <div id="alertDiv" style="text-align:center;"></div>

            <div id="helpDiv" title="Help">
                <h4>Avatar Movement Keys</h4>
                <ul>
                    <li>Turn left, right - press "A,D" or "left,right arrow" key or press and drag left mouse key
                    <li>Strafe left, right - press "Q,E" key
                    <li>Go forward, backward - press "W,S" or "up,down arrow" key
                    <li>Run - press "shift" key while going forward, backward
                    <li>Jump - press and release "space" key
                </ul>
                <h4>Item Edit Keys</h4>
                <ul>
                    <li>To select item - right click the item,
                    <li>To unselect item - press"Esc" key
                    <li>To move,rotate or scale selected item -press "1,2,or 3" key
                    <li>To focus (center the camera)on selected item - press "F" key
                    <li>To zoom in or out of focused item - scroll mouse wheel forward or backward
                    <li>To pan around focused item - press "Ctrl" key and then press and drag mouse right key
                </ul>
            </div>

        </div>



        <script type="text/javascript" src="lib/EditControl.min.js"></script>
        <script type="text/javascript" src="vishva/config.js"></script>
        <script type="text/javascript" src="vishva/assets.js"></script>
        <script type="text/javascript" src="js/Vishva-merged.js"></script>
        <script type="text/javascript">
                            $(function () {

                                //change all buttons to jquery button
                                $("button").button();
                                $("button").click(function (e) {
                                    $(this).blur();
                                });

//                                $('input').addClass("ui-corner-all");

                                var HREFsearch = org.ssatguru.babylonjs.util.HREFsearch;
                                var search = new HREFsearch();

                                var scene = search.getParm("world");
                                var scenePath = "vishva/worlds/";
                                var editEnabled = true;

                                if (!scene) {
                                    if (typeof(defaultWorld) !== "undefined") {
                                        scene = defaultWorld;
                                    } else {
                                        scene = "empty";
                                    }
                                }

                                if (typeof(noEditWorlds) !== "undefined") {
                                    var l = noEditWorlds.length;
                                    for (i = 0; i < l; i++) {
                                        if (noEditWorlds[i] == scene) {
                                            editEnabled = false;
                                        }
                                    }
                                }

                                var Vishva = org.ssatguru.babylonjs.vishva.Vishva;
                                new Vishva(scene, scenePath, editEnabled, assets, "vCanvas");
                            });
        </script>
    </body>

</html>