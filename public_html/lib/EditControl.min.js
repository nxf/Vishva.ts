var org;!function(t){!function(t){!function(t){!function(t){var i=BABYLON.Axis,s=BABYLON.Color3,e=BABYLON.Mesh,n=BABYLON.Quaternion,h=BABYLON.Space,r=BABYLON.StandardMaterial,a=BABYLON.Vector3,o=function(){function t(t,i,s,n){var h=this;this.local=!0,this.snapT=!1,this.snapR=!1,this.transSnap=1,this.rotSnap=Math.PI/18,this.axesLen=.4,this.axesScale=1,this.pDown=!1,this.pointerIsOver=!1,this.editing=!1,this.snapX=0,this.snapY=0,this.snapZ=0,this.snapRX=0,this.snapRY=0,this.snapRZ=0,this.eulerian=!1,this.transEnabled=!1,this.rotEnabled=!1,this.scaleEnabled=!1,this.meshPicked=t,this.canvas=s,this.axesScale=n,this.scene=t.getScene(),this.mainCamera=i,this.actHist=new l(t,10),t.computeWorldMatrix(!0),this.theParent=new e("EditControl",this.scene),this.theParent.position=this.meshPicked.absolutePosition,this.theParent.visibility=0,this.theParent.isPickable=!1,this.createMaterials(this.scene),this.createGuideAxes(),this.guideCtl.parent=this.theParent,this.createPickPlane(),this.pickPlane.parent=this.theParent,this.pointerdown=function(t){return h.onPointerDown(t)},this.pointerup=function(t){return h.onPointerUp(t)},this.pointermove=function(t){return h.onPointerMove(t)},s.addEventListener("pointerdown",this.pointerdown,!1),s.addEventListener("pointerup",this.pointerup,!1),s.addEventListener("pointermove",this.pointermove,!1),this.setLocalAxes(t),this.renderer=function(){return h.renderLoopProcess()},this.scene.registerBeforeRender(this.renderer)}return t.prototype.renderLoopProcess=function(){this.setAxesScale(),this.theParent.position=this.meshPicked.absolutePosition,this.onPointerOver()},t.prototype.switchTo=function(t){t.computeWorldMatrix(!0),this.meshPicked=t,this.setLocalAxes(t),this.actHist=new l(t,10)},t.prototype.setUndoCount=function(t){this.actHist.setCapacity(t)},t.prototype.undo=function(){this.actHist.undo(),this.meshPicked.computeWorldMatrix(!0),this.setLocalAxes(this.meshPicked),this.eulerian&&(this.meshPicked.rotation=this.meshPicked.rotationQuaternion.toEulerAngles(),this.meshPicked.rotationQuaternion=null)},t.prototype.redo=function(){this.actHist.redo(),this.meshPicked.computeWorldMatrix(!0),this.setLocalAxes(this.meshPicked),this.eulerian&&(this.meshPicked.rotation=this.meshPicked.rotationQuaternion.toEulerAngles(),this.meshPicked.rotationQuaternion=null)},t.prototype.detach=function(){this.canvas.removeEventListener("pointerdown",this.pointerdown,!1),this.canvas.removeEventListener("pointerup",this.pointerup,!1),this.canvas.removeEventListener("pointermove",this.pointermove,!1),this.scene.unregisterBeforeRender(this.renderer),this.disposeAll()},t.prototype.disposeAll=function(){this.theParent.dispose(),this.disposeMaterials(),this.actHist=null},t.prototype.onPointerDown=function(t){var i=this;if(t.preventDefault(),this.pDown=!0,0==t.button){var s=this.scene.pick(this.scene.pointerX,this.scene.pointerY,function(t){if(i.transEnabled){if(t==i.tX||t==i.tY||t==i.tZ)return!0}else if(i.rotEnabled){if(t==i.rX||t==i.rY||t==i.rZ)return!0}else if(i.scaleEnabled&&(t==i.sX||t==i.sY||t==i.sZ||t==i.sAll))return!0;return!1},null,this.mainCamera);if(s.hit){this.setAxisVisiblity(0),this.axisPicked=s.pickedMesh,this.axisPicked.getChildren()[0].visibility=1;var e=this.axisPicked.name;"X"==e?this.bXaxis.visibility=1:"Y"==e?this.bYaxis.visibility=1:"Z"==e?this.bZaxis.visibility=1:"ALL"==e&&(this.bXaxis.visibility=1,this.bYaxis.visibility=1,this.bZaxis.visibility=1),this.editing=!0,this.prevPos=this.getPosOnPickPlane(),window.setTimeout(function(t,s){return i.detachControl(t,s)},0,this.mainCamera,this.canvas)}}},t.prototype.isEditing=function(){return this.editing},t.prototype.detachControl=function(t,i){var s=t,e=i;s.detachControl(e)},t.prototype.isPointerOver=function(){return this.pointerIsOver},t.prototype.onPointerOver=function(){var t=this;if(!this.pDown){var i=this.scene.pick(this.scene.pointerX,this.scene.pointerY,function(i){if(t.transEnabled){if(i==t.tX||i==t.tY||i==t.tZ)return!0}else if(t.rotEnabled){if(i==t.rX||i==t.rY||i==t.rZ)return!0}else if(t.scaleEnabled&&(i==t.sX||i==t.sY||i==t.sZ||i==t.sAll))return!0;return!1},null,this.mainCamera);i.hit?i.pickedMesh!=this.prevOverMesh&&(this.pointerIsOver=!0,null!=this.prevOverMesh&&(this.prevOverMesh.visibility=0,this.restoreColor(this.prevOverMesh)),this.prevOverMesh=i.pickedMesh,this.rotEnabled?this.prevOverMesh.getChildren()[0].color=s.White():this.prevOverMesh.getChildren()[0].material=this.whiteMat,"X"==this.prevOverMesh.name?this.xaxis.color=s.White():"Y"==this.prevOverMesh.name?this.yaxis.color=s.White():"Z"==this.prevOverMesh.name&&(this.zaxis.color=s.White())):(this.pointerIsOver=!1,null!=this.prevOverMesh&&(this.restoreColor(this.prevOverMesh),this.prevOverMesh=null))}},t.prototype.restoreColor=function(t){var i,e;"X"==t.name?(i=s.Red(),e=this.redMat,this.xaxis.color=s.Red()):"Y"==this.prevOverMesh.name?(i=s.Green(),e=this.greenMat,this.yaxis.color=s.Green()):"Z"==this.prevOverMesh.name?(i=s.Blue(),e=this.blueMat,this.zaxis.color=s.Blue()):(i=s.Yellow(),e=this.yellowMat),this.rotEnabled?this.prevOverMesh.getChildren()[0].color=i:this.prevOverMesh.getChildren()[0].material=e},t.prototype.onPointerUp=function(t){this.pDown=!1,this.editing&&(this.mainCamera.attachControl(this.canvas),this.editing=!1,this.setAxisVisiblity(1),this.hideBaxis(),this.restoreColor(this.prevOverMesh),this.prevOverMesh=null,this.actHist.add())},t.prototype.onPointerMove=function(t){if(this.pDown&&this.editing){var i=this.getPosOnPickPlane();null!=i&&(this.transEnabled&&this.doTranslation(i),this.scaleEnabled&&this.local&&this.doScaling(i),this.rotEnabled&&this.doRotation(i),this.prevPos=i)}},t.prototype.doTranslation=function(t){var s,e=t.subtract(this.prevPos),n=e.length();if(s=this.local?h.LOCAL:h.WORLD,this.axisPicked==this.tX){if(n=this.local?a.Dot(e,this.localX)/(this.localX.length()*this.meshPicked.scaling.x):e.x,this.snapT){this.snapX+=n,n=0;var r=1;this.local&&(r=this.meshPicked.scaling.x),Math.abs(this.snapX)>this.transSnap/r&&(n=this.snapX>0?this.transSnap/r:-this.transSnap/r,this.snapX=0)}this.local?this.meshPicked.translate(i.X,n,s):this.meshPicked.position.x=Number(this.meshPicked.position.x)+Number(n)}else if(this.axisPicked==this.tY){if(n=this.local?a.Dot(e,this.localY)/(this.localY.length()*this.meshPicked.scaling.y):e.y,this.snapT){this.snapY+=n,n=0;var r=1;this.local&&(r=this.meshPicked.scaling.y),Math.abs(this.snapY)>this.transSnap/r&&(n=this.snapY>0?this.transSnap/r:-this.transSnap/r,this.snapY=0)}this.local?this.meshPicked.translate(i.Y,n,s):this.meshPicked.position.y=Number(this.meshPicked.position.y)+Number(n)}else if(this.axisPicked==this.tZ){if(n=this.local?a.Dot(e,this.localZ)/(this.localZ.length()*this.meshPicked.scaling.z):e.z,this.snapT){this.snapZ+=n,n=0;var r=1;this.local&&(r=this.meshPicked.scaling.z),Math.abs(this.snapZ)>this.transSnap/r&&(n=this.snapZ>0?this.transSnap/r:-this.transSnap/r,this.snapZ=0)}this.local?this.meshPicked.translate(i.Z,n,s):this.meshPicked.position.z=Number(this.meshPicked.position.z)+Number(n)}},t.prototype.doScaling=function(t){var i=this.prevPos.subtract(this.meshPicked.position),s=t.subtract(this.prevPos),e=s.length()/i.length();if(this.axisPicked==this.sX){var n=a.Dot(s,this.localX);this.meshPicked.scaling.x*=n>=0?1+e:1-e}else if(this.axisPicked==this.sY){var n=a.Dot(s,this.localY);this.meshPicked.scaling.y*=n>=0?1+e:1-e}else if(this.axisPicked==this.sZ){var n=a.Dot(s,this.localZ);this.meshPicked.scaling.z*=n>=0?1+e:1-e}else if(this.axisPicked==this.sAll){var n=a.Dot(s,this.mainCamera.upVector);e=s.length()/5,n<0&&(e*=-1),this.meshPicked.scaling.x*=1+e,this.meshPicked.scaling.y*=1+e,this.meshPicked.scaling.z*=1+e}},t.prototype.doRotation=function(s){var e=a.TransformNormal(i.Z,this.mainCamera.getWorldMatrix());if(this.axisPicked==this.rX){var n=t.getAngle(this.prevPos,s,this.meshPicked.absolutePosition,e);this.snapR&&(this.snapRX+=n,n=0,Math.abs(this.snapRX)>=this.rotSnap&&(n=this.snapRX>0?this.rotSnap:-this.rotSnap,this.snapRX=0)),this.local?(a.Dot(this.localX,e)<0&&(n*=-1),this.meshPicked.rotate(i.X,n,h.LOCAL)):this.meshPicked.rotate(new a(e.x,0,0),n,h.WORLD),this.setLocalAxes(this.meshPicked)}else if(this.axisPicked==this.rY){var n=t.getAngle(this.prevPos,s,this.meshPicked.absolutePosition,e);this.snapR&&(this.snapRY+=n,n=0,Math.abs(this.snapRY)>=this.rotSnap&&(n=this.snapRY>0?this.rotSnap:-this.rotSnap,this.snapRY=0)),this.local?(a.Dot(this.localY,e)<0&&(n*=-1),this.meshPicked.rotate(i.Y,n,h.LOCAL)):this.meshPicked.rotate(new a(0,e.y,0),n,h.WORLD),this.setLocalAxes(this.meshPicked)}else if(this.axisPicked==this.rZ){var n=t.getAngle(this.prevPos,s,this.meshPicked.absolutePosition,e);this.snapR&&(this.snapRZ+=n,n=0,Math.abs(this.snapRZ)>=this.rotSnap&&(n=this.snapRZ>0?this.rotSnap:-this.rotSnap,this.snapRZ=0)),this.local?(a.Dot(this.localZ,e)<0&&(n*=-1),this.meshPicked.rotate(i.Z,n,h.LOCAL)):this.meshPicked.rotate(new a(0,0,e.z),n,h.WORLD),this.setLocalAxes(this.meshPicked)}this.eulerian&&(this.meshPicked.rotation=this.meshPicked.rotationQuaternion.toEulerAngles())},t.prototype.getPosOnPickPlane=function(){var t=this,i=this.scene.pick(this.scene.pointerX,this.scene.pointerY,function(i){return i==t.pickPlane},null,this.mainCamera);return i.hit?i.pickedPoint:null},t.prototype.hideBaxis=function(){this.bXaxis.visibility=0,this.bYaxis.visibility=0,this.bZaxis.visibility=0},t.prototype.setAxisVisiblity=function(t){this.transEnabled&&(this.tEndX.visibility=t,this.tEndY.visibility=t,this.tEndZ.visibility=t),this.rotEnabled&&(this.rEndX.visibility=t,this.rEndY.visibility=t,this.rEndZ.visibility=t),this.scaleEnabled&&(this.sEndX.visibility=t,this.sEndY.visibility=t,this.sEndZ.visibility=t,this.sEndAll.visibility=t)},t.prototype.isTranslationEnabled=function(){return this.transEnabled},t.prototype.enableTranslation=function(){null==this.tX&&(this.createTransAxes(),this.tCtl.parent=this.theParent),this.transEnabled||(this.tEndX.visibility=1,this.tEndY.visibility=1,this.tEndZ.visibility=1,this.transEnabled=!0,this.disableRotation(),this.disableScaling())},t.prototype.disableTranslation=function(){this.transEnabled&&(this.tEndX.visibility=0,this.tEndY.visibility=0,this.tEndZ.visibility=0,this.transEnabled=!1)},t.prototype.isRotationEnabled=function(){return this.rotEnabled},t.prototype.enableEuler=function(t){this.eulerian=t},t.prototype.enableRotation=function(){null==this.rX&&(this.createRotAxes(),this.rCtl.parent=this.theParent),this.rotEnabled||(this.rEndX.visibility=1,this.rEndY.visibility=1,this.rEndZ.visibility=1,this.rotEnabled=!0,this.disableTranslation(),this.disableScaling())},t.prototype.disableRotation=function(){this.rotEnabled&&(this.rEndX.visibility=0,this.rEndY.visibility=0,this.rEndZ.visibility=0,this.rotEnabled=!1)},t.prototype.isScalingEnabled=function(){return this.scaleEnabled},t.prototype.enableScaling=function(){null==this.sX&&(this.createScaleAxes(),this.sCtl.parent=this.theParent),this.scaleEnabled||(this.sEndX.visibility=1,this.sEndY.visibility=1,this.sEndZ.visibility=1,this.sEndAll.visibility=1,this.scaleEnabled=!0,this.disableTranslation(),this.disableRotation())},t.prototype.disableScaling=function(){this.scaleEnabled&&(this.sEndX.visibility=0,this.sEndY.visibility=0,this.sEndZ.visibility=0,this.sEndAll.visibility=0,this.scaleEnabled=!1)},t.prototype.createGuideAxes=function(){var t=this.axesLen*this.axesScale;this.guideCtl=new e("guideCtl",this.scene),this.bXaxis=e.CreateLines("bxAxis",[new a(-100,0,0),new a(100,0,0)],this.scene),this.bYaxis=e.CreateLines("byAxis",[new a(0,-100,0),new a(0,100,0)],this.scene),this.bZaxis=e.CreateLines("bzAxis",[new a(0,0,-100),new a(0,0,100)],this.scene),this.bXaxis.isPickable=!1,this.bYaxis.isPickable=!1,this.bZaxis.isPickable=!1,this.bXaxis.parent=this.guideCtl,this.bYaxis.parent=this.guideCtl,this.bZaxis.parent=this.guideCtl,this.bXaxis.color=s.Red(),this.bYaxis.color=s.Green(),this.bZaxis.color=s.Blue(),this.bXaxis.renderingGroupId=1,this.bYaxis.renderingGroupId=1,this.bZaxis.renderingGroupId=1,this.hideBaxis(),this.xaxis=e.CreateLines("xAxis",[new a(0,0,0),new a(t,0,0)],this.scene),this.yaxis=e.CreateLines("yAxis",[new a(0,0,0),new a(0,t,0)],this.scene),this.zaxis=e.CreateLines("zAxis",[new a(0,0,0),new a(0,0,t)],this.scene),this.xaxis.isPickable=!1,this.yaxis.isPickable=!1,this.zaxis.isPickable=!1,this.xaxis.parent=this.guideCtl,this.yaxis.parent=this.guideCtl,this.zaxis.parent=this.guideCtl,this.xaxis.color=s.Red(),this.yaxis.color=s.Green(),this.zaxis.color=s.Blue(),this.xaxis.renderingGroupId=2,this.yaxis.renderingGroupId=2,this.zaxis.renderingGroupId=2},t.prototype.createPickPlane=function(){this.pickPlane=e.CreatePlane("axisPlane",200,this.scene),this.pickPlane.isPickable=!1,this.pickPlane.visibility=0,this.pickPlane.billboardMode=e.BILLBOARDMODE_ALL,this.pickPlane.renderingGroupId=1},t.prototype.createTransAxes=function(){var t=this.axesLen*this.axesScale;this.tCtl=new e("tarnsCtl",this.scene),this.tX=this.extrudeBox(.02,t),this.tX.name="X",this.tY=this.tX.clone("Y"),this.tZ=this.tX.clone("Z"),this.tX.material=this.redMat,this.tY.material=this.greenMat,this.tZ.material=this.blueMat,this.tX.parent=this.tCtl,this.tY.parent=this.tCtl,this.tZ.parent=this.tCtl,this.tX.rotation.y=1.57,this.tY.rotation.x-=1.57,this.tX.visibility=0,this.tY.visibility=0,this.tZ.visibility=0,this.tX.renderingGroupId=1,this.tY.renderingGroupId=1,this.tZ.renderingGroupId=1,this.tX.isPickable=!1,this.tY.isPickable=!1,this.tZ.isPickable=!1;var i=t*this.axesScale/4,s=.04*this.axesScale;this.tEndX=e.CreateCylinder("tEndX",i,0,s,6,1,this.scene),this.tEndY=this.tEndX.clone("tEndY"),this.tEndZ=this.tEndX.clone("tEndZ"),this.tEndX.rotation.x=1.57,this.tEndY.rotation.x=1.57,this.tEndZ.rotation.x=1.57,this.tEndX.parent=this.tX,this.tEndY.parent=this.tY,this.tEndZ.parent=this.tZ,this.tEndX.position.z=t-i/2,this.tEndY.position.z=t-i/2,this.tEndZ.position.z=t-i/2,this.tEndX.material=this.redMat,this.tEndY.material=this.greenMat,this.tEndZ.material=this.blueMat,this.tEndX.renderingGroupId=1,this.tEndY.renderingGroupId=1,this.tEndZ.renderingGroupId=1,this.tEndX.isPickable=!1,this.tEndY.isPickable=!1,this.tEndZ.isPickable=!1},t.prototype.createRotAxes=function(){var t=this.axesLen*this.axesScale*2;this.rCtl=new e("rotCtl",this.scene),this.rX=e.CreateTorus("X",t,.04,30,this.scene),this.rY=this.rX.clone("Y"),this.rZ=this.rX.clone("Z"),this.rX.material=this.redMat,this.rY.material=this.greenMat,this.rZ.material=this.blueMat,this.rX.parent=this.rCtl,this.rY.parent=this.rCtl,this.rZ.parent=this.rCtl,this.rX.rotation.z-=1.57,this.rZ.rotation.x=1.57,this.rX.visibility=0,this.rY.visibility=0,this.rZ.visibility=0,this.rX.renderingGroupId=1,this.rY.renderingGroupId=1,this.rZ.renderingGroupId=1,this.rX.isPickable=!1,this.rY.isPickable=!1,this.rZ.isPickable=!1;var i=t;this.rEndX=this.createCircle(i/2),this.rEndY=this.rEndX.clone(""),this.rEndZ=this.rEndX.clone(""),this.rEndX.parent=this.rX,this.rEndY.parent=this.rY,this.rEndZ.parent=this.rZ,this.rEndX.rotation.x=1.57,this.rEndY.rotation.x=1.57,this.rEndZ.rotation.x=1.57,this.rEndX.color=s.Red(),this.rEndY.color=s.Green(),this.rEndZ.color=s.Blue(),this.rEndX.renderingGroupId=1,this.rEndY.renderingGroupId=1,this.rEndZ.renderingGroupId=1,this.rEndX.isPickable=!1,this.rEndY.isPickable=!1,this.rEndZ.isPickable=!1},t.prototype.extrudeBox=function(t,i){var s=[new a(t,t,0),new a(-t,t,0),new a(-t,-t,0),new a(t,-t,0),new a(t,t,0)],n=[new a(0,0,0),new a(0,0,i)];return e.ExtrudeShape("",s,n,1,0,2,this.scene)},t.prototype.createCircle=function(t){for(var i,s,n=[],h=3.14/180,r=0,o=0;o<=360;o+=10)i=t*Math.cos(o*h),s=90==o?t:270==o?-t:t*Math.sin(o*h),n[r]=new a(i,s,0),r++;return e.CreateLines("",n,this.scene)},t.prototype.createScaleAxes=function(){var t=this.axesLen*this.axesScale;this.sCtl=new e("sCtl",this.scene),this.sAll=e.CreateBox("ALL",.08,this.scene),this.sX=this.extrudeBox(.02,t),this.sX.name="X",this.sY=this.sX.clone("Y"),this.sZ=this.sX.clone("Z"),this.sX.material=this.redMat,this.sY.material=this.greenMat,this.sZ.material=this.blueMat,this.sAll.material=this.yellowMat,this.sX.parent=this.sCtl,this.sY.parent=this.sCtl,this.sZ.parent=this.sCtl,this.sAll.parent=this.sCtl,this.sX.rotation.y=1.57,this.sY.rotation.x-=1.57,this.sX.visibility=0,this.sY.visibility=0,this.sZ.visibility=0,this.sAll.visibility=0,this.sX.renderingGroupId=1,this.sY.renderingGroupId=1,this.sZ.renderingGroupId=1,this.sAll.renderingGroupId=1,this.sX.isPickable=!1,this.sY.isPickable=!1,this.sZ.isPickable=!1,this.sAll.isPickable=!1;var i=.04*this.axesScale;this.sEndX=e.CreateBox("",i,this.scene),this.sEndY=this.sEndX.clone(""),this.sEndZ=this.sEndX.clone(""),this.sEndAll=this.sEndX.clone(""),this.sEndX.parent=this.sX,this.sEndY.parent=this.sY,this.sEndZ.parent=this.sZ,this.sEndAll.parent=this.sAll,this.sEndX.position.z=t-i/2,this.sEndY.position.z=t-i/2,this.sEndZ.position.z=t-i/2,this.sEndX.material=this.redMat,this.sEndY.material=this.greenMat,this.sEndZ.material=this.blueMat,this.sEndAll.material=this.yellowMat,this.sEndX.renderingGroupId=1,this.sEndY.renderingGroupId=1,this.sEndZ.renderingGroupId=1,this.sEndAll.renderingGroupId=1,this.sEndX.isPickable=!1,this.sEndY.isPickable=!1,this.sEndZ.isPickable=!1,this.sEndAll.isPickable=!1},t.prototype.setLocalAxes=function(t){var s=t.getWorldMatrix(),e=t.absolutePosition;this.localX=a.TransformCoordinates(i.X,s).subtract(e),this.localY=a.TransformCoordinates(i.Y,s).subtract(e),this.localZ=a.TransformCoordinates(i.Z,s).subtract(e),this.localRot=a.RotationFromAxis(this.localX,this.localY,this.localZ),this.local&&this.theParent.rotation.copyFrom(this.localRot)},t.prototype.setLocal=function(t){this.local!=t&&(this.local=t,this.local?this.theParent.rotation.copyFrom(this.localRot):this.theParent.rotation.copyFrom(a.Zero()))},t.prototype.isLocal=function(){return this.local},t.prototype.setTransSnap=function(t){this.snapT=t},t.prototype.setRotSnap=function(t){this.snapR=t},t.prototype.setTransSnapValue=function(t){this.transSnap=t},t.prototype.setRotSnapValue=function(t){this.rotSnap=t},t.prototype.setAxesScale=function(){var t=this.theParent.position.subtract(this.mainCamera.position),s=a.TransformNormal(i.Z,this.mainCamera.getWorldMatrix()),e=a.Dot(t,s)/s.length(),n=e/2,h=new a(n,n,n);this.theParent.scaling=h,this.pickPlane.scaling=h},t.getAngle=function(t,i,s,e){var n=t.subtract(s),h=i.subtract(s),r=a.Cross(n,h),o=Math.asin(r.length()/(n.length()*h.length()));return a.Dot(r,e)<0&&(o*=-1),o},t.prototype.createMaterials=function(i){this.redMat=t.getStandardMaterial("redMat",s.Red(),i),this.greenMat=t.getStandardMaterial("greenMat",s.Green(),i),this.blueMat=t.getStandardMaterial("blueMat",s.Blue(),i),this.whiteMat=t.getStandardMaterial("whiteMat",s.White(),i),this.yellowMat=t.getStandardMaterial("whiteMat",s.Yellow(),i)},t.prototype.disposeMaterials=function(){this.redMat.dispose(),this.greenMat.dispose(),this.blueMat.dispose(),this.whiteMat.dispose(),this.yellowMat.dispose()},t.getStandardMaterial=function(t,i,e){var n=new r(t,e);return n.emissiveColor=i,n.diffuseColor=s.Black(),n.specularColor=s.Black(),n},t}();t.EditControl=o;var l=function(){function t(t,i){this.lastMax=10,this.acts=new Array,this.last=-1,this.current=-1,this.mesh=t,this.lastMax=i-1,null==t.rotationQuaternion&&null!=t.rotation&&(t.rotationQuaternion=n.RotationYawPitchRoll(t.rotation.y,t.rotation.x,t.rotation.z)),this.add()}return t.prototype.setCapacity=function(t){if(0==t)return void console.error("capacity should be more than zero");this.lastMax=t-1,this.last=-1,this.current=-1,this.acts=new Array,this.add()},t.prototype.add=function(){var t=new c(this.mesh);this.current<this.last&&(this.acts.splice(this.current+1),this.last=this.current),this.last==this.lastMax?(this.acts.shift(),this.acts.push(t)):(this.acts.push(t),this.last++,this.current++)},t.prototype.undo=function(){this.current>0&&(this.current--,this.acts[this.current].perform(this.mesh))},t.prototype.redo=function(){this.current<this.last&&(this.current++,this.acts[this.current].perform(this.mesh))},t}();t.ActHist=l;var c=function(){function t(t){this.p=t.position.clone(),this.r=t.rotationQuaternion.clone(),this.s=t.scaling.clone()}return t.prototype.perform=function(t){t.position=this.p.clone(),t.rotationQuaternion=this.r.clone(),t.scaling=this.s.clone()},t}();t.Act=c}(t.component||(t.component={}))}(t.babylonjs||(t.babylonjs={}))}(t.ssatguru||(t.ssatguru={}))}(org||(org={}));